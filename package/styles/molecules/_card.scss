@use "sass:color";
@use "../mixins" as *;
@use "../tokens/colors" as c;

// Base card
.card {
  display: flex;
  flex-direction: column;
  background-color: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  padding: var(--space-large);
  box-shadow: var(--shadow-faint);
  @include base-transition;
  @include hover-shadow;
}

// Color variants with smart background
@each $palette, $entries in c.$colors {
  @each $name, $value in $entries {
    $class: if($name == default, ".#{$palette}", ".#{$palette}-#{$name}");
    
    .card#{$class} {
      border-color: $value;
      $l: color.channel($value, "lightness", hsl);
      
      @if $l > 60% {
        background-color: $value;
        color: #0D1117;
      } @else {
        background-color: color-mix(in srgb, $value 10%, var(--color-surface));
      }
    }
  }
}

// Padding variants
.card.padding-none { padding: 0; }
.card.padding-compact { padding: var(--space-small); }
.card.padding-spacious { padding: var(--space-xlarge); }

// Shadow variants
.card.shadow-none { box-shadow: none; }
.card.shadow-medium { box-shadow: var(--shadow-soft); }
.card.shadow-large { box-shadow: var(--shadow-medium); }

// Interactive variant
.card.interactive {
  @include interactive;
}

// Internal components
.card-header {
  padding: var(--space-medium);
  border-bottom: 1px solid var(--color-border);
  margin: calc(-1 * var(--space-large)) calc(-1 * var(--space-large)) var(--space-medium);
  border-radius: var(--radius-lg) var(--radius-lg) 0 0;
}

.card-body {
  flex: 1;
  padding: var(--space-medium);
}

.card-footer {
  padding: var(--space-medium);
  border-top: 1px solid var(--color-border);
  margin: var(--space-medium) calc(-1 * var(--space-large)) calc(-1 * var(--space-large));
  border-radius: 0 0 var(--radius-lg) var(--radius-lg);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-2);
}

.card-image {
  width: 100%;
  height: auto;
  object-fit: cover;
  margin: calc(-1 * var(--space-large)) calc(-1 * var(--space-large)) var(--space-medium);
  border-radius: var(--radius-lg) var(--radius-lg) 0 0;
}
