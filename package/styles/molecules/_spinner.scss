@use "sass:color";
@use "../tokens/colors" as c;

/* Keyframes */
@keyframes spin {
  to { transform: rotate(360deg); }
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

@keyframes bounce {
  0%, 80%, 100% { transform: scale(0); }
  40% { transform: scale(1); }
}

// Base spinner
.spinner {
  display: inline-block;
  width: 1.5rem;
  height: 1.5rem;
  border: 3px solid var(--cloud-silent);
  border-top-color: var(--thought);
  border-radius: 50%;
  animation: spin var(--motion-duration-slow) linear infinite;
}

// Helper mixin
@mixin spinner-variant($value) {
  border-top-color: $value;
}

// Gera classes de cor para spinners
@each $palette, $entries in c.$colors {
  @each $name, $value in $entries {
    @if $name == default {
      .spinner.#{"" + $palette} {
        @include spinner-variant($value);
      }
    } @else {
      .spinner.#{"" + $palette}-#{$name} {
        @include spinner-variant($value);
      }
    }
  }
}

/* Tamanhos */
.spinner.small {
  width: 1rem;
  height: 1rem;
  border-width: 2px;
}

.spinner.large {
  width: 2rem;
  height: 2rem;
  border-width: 3px;
}

.spinner.extra-large {
  width: 3rem;
  height: 3rem;
  border-width: 4px;
}

/* Spinner com pontos */
.spinner-dots {
  display: inline-flex;
  align-items: center;
  gap: var(--space-xsmall);
}

.spinner-dots span {
  display: inline-block;
  width: 0.5rem;
  height: 0.5rem;
  background-color: var(--thought);
  border-radius: 50%;
  animation: bounce 1.4s infinite ease-in-out both;
}

.spinner-dots span:nth-child(1) { animation-delay: -0.32s; }
.spinner-dots span:nth-child(2) { animation-delay: -0.16s; }

.spinner-dots.small span {
  width: 0.375rem;
  height: 0.375rem;
}

.spinner-dots.large span {
  width: 0.625rem;
  height: 0.625rem;
}

/* Spinner pulsante */
.spinner-pulse {
  display: inline-block;
  width: 1.5rem;
  height: 1.5rem;
  background-color: var(--thought);
  border-radius: 50%;
  animation: pulse 1.2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

.spinner-pulse.small {
  width: 1rem;
  height: 1rem;
}

.spinner-pulse.large {
  width: 2rem;
  height: 2rem;
}

/* Overlay */
.spinner-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: rgba(0, 0, 0, 0.5);
  z-index: 9999;
  backdrop-filter: blur(2px);
}

.spinner-overlay .spinner {
  border-color: rgba(255, 255, 255, 0.2);
  border-top-color: var(--cloud-pure);
}
