{
  "version": 3,
  "sources": ["../package/components/icons/index.js"],
  "sourcesContent": ["// Custom element for icons: <m-icon name=\"search\" size=\"small|medium|large|...\" stroke=\"thin|normal|bold\" label=\"...\" color=\"#hex|token\" version=\"latest\">\r\n// Lucide integration via CDN (unpkg lucide-static). Icons are fetched on demand and cached.\r\n\r\nconst ICON_CDN_BASE = \"https://unpkg.com/lucide-static\";\r\nconst ICON_VERSION_DEFAULT = \"latest\"; // You can pin, e.g., \"0.463.0\"\r\nconst ICON_CACHE = new Map(); // name -> Promise<string>\r\n\r\nasync function fetchLucideSvg(name, version = ICON_VERSION_DEFAULT) {\r\n  const normalized = name.trim().toLowerCase().replace(/_/g, \"-\");\r\n  const cacheKey = `${version}:${normalized}`;\r\n  if (ICON_CACHE.has(cacheKey)) return ICON_CACHE.get(cacheKey);\r\n\r\n  const url = `${ICON_CDN_BASE}@${version}/icons/${normalized}.svg`;\r\n  const req = fetch(url).then(async (res) => {\r\n    if (!res.ok) throw new Error(`Icon not found: ${normalized}`);\r\n    return res.text();\r\n  });\r\n  ICON_CACHE.set(cacheKey, req);\r\n  return req;\r\n}\r\n\r\nfunction sanitizeSvg(svgText) {\r\n  // Create a DOM fragment and ensure sizing/styling are controlled by CSS, not inline attrs\r\n  const tpl = document.createElement(\"template\");\r\n  tpl.innerHTML = svgText.trim();\r\n  const svg = tpl.content.querySelector(\"svg\");\r\n  if (!svg) return null;\r\n  // Remove width/height so CSS can size it\r\n  svg.removeAttribute(\"width\");\r\n  svg.removeAttribute(\"height\");\r\n  // Normalize stroke/fill so design tokens drive appearance\r\n  svg.setAttribute(\"fill\", \"none\");\r\n  svg.setAttribute(\"stroke\", \"currentColor\");\r\n  svg.setAttribute(\"stroke-linecap\", svg.getAttribute(\"stroke-linecap\") || \"round\");\r\n  svg.setAttribute(\"stroke-linejoin\", svg.getAttribute(\"stroke-linejoin\") || \"round\");\r\n  // Remove inline stroke-width so CSS var controls it\r\n  svg.removeAttribute(\"stroke-width\");\r\n  return svg.outerHTML;\r\n}\r\n\r\nclass MIcon extends HTMLElement {\r\n  static get observedAttributes() {\r\n    return [\"name\", \"size\", \"stroke\", \"label\", \"color\", \"version\"];\r\n  }\r\n\r\n  constructor() {\r\n    super();\r\n    this._requestId = 0;\r\n  }\r\n\r\n  connectedCallback() {\r\n    this._update();\r\n  }\r\n\r\n  attributeChangedCallback() {\r\n    this._update();\r\n  }\r\n\r\n  _setA11y(svg) {\r\n    const label = this.getAttribute(\"label\");\r\n    if (label) {\r\n      svg.setAttribute(\"role\", \"img\");\r\n      svg.setAttribute(\"aria-label\", label);\r\n      svg.removeAttribute(\"aria-hidden\");\r\n    } else {\r\n      svg.setAttribute(\"aria-hidden\", \"true\");\r\n      svg.removeAttribute(\"role\");\r\n      svg.removeAttribute(\"aria-label\");\r\n    }\r\n  }\r\n\r\n  async _update() {\r\n    const name = (this.getAttribute(\"name\") || \"\").toLowerCase();\r\n    const size = (this.getAttribute(\"size\") || \"\").toLowerCase();\r\n    const stroke = (this.getAttribute(\"stroke\") || \"\").toLowerCase();\r\n    const color = this.getAttribute(\"color\");\r\n    const version = this.getAttribute(\"version\") || ICON_VERSION_DEFAULT;\r\n\r\n    // Map attributes to CSS hooks\r\n    if (size) this.setAttribute(\"size\", size);\r\n    if (stroke) this.setAttribute(\"stroke\", stroke);\r\n    if (color) this.style.color = color; else this.style.removeProperty(\"color\");\r\n\r\n    // Clear current content while loading\r\n    this.innerHTML = \"\";\r\n    if (!name) return;\r\n\r\n    const requestId = ++this._requestId;\r\n    try {\r\n      const raw = await fetchLucideSvg(name, version);\r\n      const sanitized = sanitizeSvg(raw) || '';\r\n      // Avoid race condition: ensure this is latest request\r\n      if (requestId !== this._requestId) return;\r\n      if (sanitized) {\r\n        this.innerHTML = sanitized;\r\n      } else {\r\n        throw new Error(\"Invalid SVG content\");\r\n      }\r\n    } catch (err) {\r\n      // Fallback: simple square placeholder\r\n      this.innerHTML = `\r\n        <svg viewBox=\"0 0 24 24\" aria-hidden=\"true\" focusable=\"false\">\r\n          <rect x=\"4\" y=\"4\" width=\"16\" height=\"16\" rx=\"2\"></rect>\r\n        </svg>\r\n      `;\r\n      // eslint-disable-next-line no-console\r\n      console.warn(`[m-icon] ${err?.message || err}`);\r\n    }\r\n\r\n    const svg = this.querySelector(\"svg\");\r\n    if (svg) this._setA11y(svg);\r\n  }\r\n}\r\n\r\nif (!customElements.get(\"m-icon\")) {\r\n  customElements.define(\"m-icon\", MIcon);\r\n}\r\n"],
  "mappings": "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",
  "names": ["ICON_CDN_BASE", "ICON_VERSION_DEFAULT", "ICON_CACHE", "fetchLucideSvg", "name", "version", "normalized", "cacheKey", "url", "req", "res", "sanitizeSvg", "svgText", "tpl", "svg", "MIcon", "label", "size", "stroke", "color", "requestId", "raw", "sanitized", "err"]
}
